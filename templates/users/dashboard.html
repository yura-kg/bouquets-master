{% extends 'base.html' %}
{% load static %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - –ë—É–∫–µ—Ç–ú–∞—Å—Ç–µ—Ä{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <ul class="nav nav-tabs mb-4" id="dashboardTabs" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active" id="flowers-tab" data-bs-toggle="tab" 
                        data-bs-target="#flowers" type="button" role="tab">
                    üìã –ö–∞—Ç–∞–ª–æ–≥ —Ü–≤–µ—Ç–æ–≤
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="bouquets-tab" data-bs-toggle="tab" 
                        data-bs-target="#bouquets" type="button" role="tab">
                    üíê –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—É–∫–µ—Ç–∞–º–∏
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link" id="export-tab" data-bs-toggle="tab" 
                        data-bs-target="#export" type="button" role="tab">
                    üì§ –≠–∫—Å–ø–æ—Ä—Ç CSV
                </button>
            </li>
        </ul>

        <div class="tab-content" id="dashboardTabsContent">
            <!-- Flowers Tab -->
            <div class="tab-pane fade show active" id="flowers" role="tabpanel">
                {% include 'catalog/flower_catalog.html' %}
            </div>

            <!-- Bouquets Tab -->
            <div class="tab-pane fade" id="bouquets" role="tabpanel">
                {% include 'bouquets/bouquet_list.html' %}
            </div>

            <!-- Export Tab -->
            <div class="tab-pane fade" id="export" role="tabpanel">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">–≠–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –¥–ª—è Tilda</h5>
                        <p class="card-text">–°–∫–∞—á–∞–π—Ç–µ CSV —Ñ–∞–π–ª –≤ —Ñ–æ—Ä–º–∞—Ç–µ Tilda –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –Ω–∞ –≤–∞—à —Å–∞–π—Ç.</p>
                        <a href="{% url 'export_tilda_csv' %}" class="btn btn-success">
                            üì• –°–∫–∞—á–∞—Ç—å CSV –¥–ª—è Tilda
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Activate tab from URL hash
document.addEventListener('DOMContentLoaded', function() {
    const hash = window.location.hash;
    if (hash) {
        const tab = new bootstrap.Tab(document.querySelector(hash + '-tab'));
        tab.show();
    }
    
    // Update URL when tab changes
    const tabEls = document.querySelectorAll('button[data-bs-toggle="tab"]');
    tabEls.forEach(tab => {
        tab.addEventListener('shown.bs.tab', function (event) {
            const target = event.target.getAttribute('data-bs-target');
            window.location.hash = target;
        });
    });
});
</script>
{% endblock %}
